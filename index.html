<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>TinySine USB/Wireless Relay Module TOSR1x - Interfacing Library for .NET | TinySine Relay Module </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="TinySine USB/Wireless Relay Module TOSR1x - Interfacing Library for .NET | TinySine Relay Module ">
    <meta name="generator" content="docfx 2.45.1.0">
    
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/bootstrap.min.css">
    <meta property="docfx:navrel" content="toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container-fluid">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index.html">
                <img id="logo" class="logo" src="best-practices/resources/images/unosquare_logo.svg" alt="Unosquare">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar">
          <div class="container-fluid hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container-fluid body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container-fluid body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">

<p><a href="https://ci.appveyor.com/project/geoperez/tsrelay/branch/master"><img src="https://ci.appveyor.com/api/projects/status/8frmfyb5wo751aop/branch/master?svg=true" alt="Build status"></a><a href="https://github.com/igrigorik/ga-beacon"><img src="https://ga-beacon.appspot.com/UA-8535255-2/unosquare/tsrelay/" alt="Analytics"></a></p>
<h1 id="tinysine-usbwireless-relay-module-tosr1x---interfacing-library-for-net">TinySine USB/Wireless Relay Module TOSR1x - Interfacing Library for .NET</h1>
<ul>
<li>Product Page: <a href="http://www.tinyosshop.com/index.php?route=product/product&amp;path=141_142&amp;product_id=947">http://www.tinyosshop.com/index.php?route=product/product&path=141_142&product_id=947</a></li>
</ul>
<h2 id="features">Features</h2>
<ul>
<li>All documented commands are implemented (2016-11-06)</li>
<li>No dependencies</li>
<li>Nice sample application included for testing</li>
<li>MIT License</li>
</ul>
<h2 id="nuget-installation-nuget-versionhttpsbadgefuryionuunosquaretinysinerelaymodulesvghttpsbadgefuryionuunosquaretinysinerelaymodule">NuGet Installation <a href="https://badge.fury.io/nu/Unosquare.TinySine.RelayModule"><img src="https://badge.fury.io/nu/Unosquare.TinySine.RelayModule.svg" alt="NuGet version"></a></h2>
<pre><code>PM&gt; Install-Package Unosquare.TinySine.RelayModule
</code></pre><h2 id="usage">Usage</h2>
<pre><code class="lang-csharp">using (var controller = new RelayController())
{
    controller.open(&quot;COM4&quot;, RelayController.DefaultPassword);

    controller[RelayNumber.Relay01] = true;
    controller[RelayNumber.Relay02] = false;
    controller.RelayOperatingMode = RelayOperatingMode.Momentary;
    Console.WriteLine($&quot;Board: Model: {controller.BoardModel}, Version: {controller.BoardVersion}, FW: {controller.FirmwareVersion}, Channels: {controller.RelayChannelCount}, Mode: {controller.RelayOperatingMode}&quot;);
    controller.SetRelayStateAll(false);
}
</code></pre><h2 id="net-core-2-for-raspberry-pi-3">.NET Core 2 for Raspberry Pi 3</h2>
<p>Implementing .NET Core 2 in your projects running on <a href="https://ubuntu-pi-flavour-maker.org/download/">Ubuntu Classic Server 16.04</a> for Raspberry PI 3.</p>
<p>This example uses the Sample project</p>
<p>You need to have:</p>
<ul>
<li><a href="https://www.microsoft.com/net/core#windowscmd">.NET Core SDK</a> installed on your machine.</li>
<li><a href="https://www.visualstudio.com">Visual Studio 2017</a></li>
<li><a href="https://ubuntu-pi-flavour-maker.org/download/">Ubuntu Classic Server 16.04</a> for Raspberry PI 3.</li>
<li><a href="http://www.7-zip.org/">7zip</a></li>
<li><a href="https://sourceforge.net/projects/win32diskimager/">Win32DiskImage</a></li>
<li>Highly recommend that you use a Class 6 or Class 10 microSD HC card.</li>
</ul>
<h3 id="configuring-ubuntu-on-the-raspberry">Configuring Ubuntu on the Raspberry</h3>
<p>If you already have installed all you need:</p>
<ul>
<li>Extract and Write Ubuntu Classic Server into your SD Card</li>
<li>Plugin your SD Card into your Raspberry and start it<ul>
<li>It&#39;s going to ask you for login and password, the defaults are ubuntu/ubuntu</li>
</ul>
</li>
<li>Install the  <a href="http://wiringpi.com/download-and-install/">Wiring Pi</a> dependency (Needed it to access the serial port).</li>
</ul>
<h4 id="installing-net-core">Installing .NET Core</h4>
<p>Run the fallowing commands in your Raspberry Pi</p>
<pre><code># Update Ubuntu 16.04
sudo apt-get -y update

# Install the packages necessary for .NET Core
sudo apt-get -y install libunwind8 libunwind8-dev gettext libicu-dev liblttng-ust-dev libcurl4-openssl-dev libssl-dev uuid-dev

# Download the latest binaries for .NET Core 2 
wget https://dotnetcli.blob.core.windows.net/dotnet/Runtime/release/2.0.0/dotnet-runtime-latest-linux-arm.tar.gz

# Make a directory for .NET Core to live in
mkdir /home/ubuntu/dotnet

# Unzip the binaries into the directory you just created
tar -xvf dotnet-runtime-latest-linux-arm.tar.gz -C /home/ubuntu/dotnet

# Now add the path to the dotnet executable to the environment path
# This ensures the next time you log in, the dotnet exe is on your path
echo &quot;PATH=\$PATH:/home/ubuntu/dotnet&quot; &gt;&gt; dotnetcore.sh
sudo mv dotnetcore.sh /etc/profile.d

# Then run the command below to add the path to the dotnet executable to the current session
PATH=$PATH:/home/ubuntu/dotnet
</code></pre><p>After that, you can reboot the raspberry. To check if dotnet is installed just run &quot;dotnet&quot; and a message should show.</p>
<pre><code>ubuntu@ubuntu:~$ dotnet

Usage: dotnet [options]
Usage: dotnet [path-to-application]

Options:
  -h|--help            Display help.
  --version         Display version.

path-to-application:
  The path to an application .dll file to execute.
</code></pre><h3 id="configuring-windows-and-visual-studio-2017">Configuring Windows and Visual Studio 2017</h3>
<p>Once you have all you need:</p>
<ul>
<li>Open the Sample Project</li>
<li>You need to edit your csproj to run .NET Core 2, you need to check if the <code>TargetFramework</code> is correct
  <code>xml
  &lt;PropertyGroup&gt;
      &lt;OutputType&gt;Exe&lt;/OutputType&gt;
      &lt;AssemblyTitle&gt;Unosquare.TinySine.RelayModule.Sample&lt;/AssemblyTitle&gt;
      &lt;AssemblyName&gt;Unosquare.TinySine.RelayModule.Sample&lt;/AssemblyName&gt;
      &lt;PackageId&gt;Unosquare.TinySine.RelayModule.Sample&lt;/PackageId&gt;
      &lt;TargetFramework&gt;netcoreapp2.0&lt;/TargetFramework&gt;
  &lt;/PropertyGroup&gt;</code></li>
<li>Rebuild the Sample project</li>
<li>Open the Package Manager Console</li>
<li>Type
  <code>// If you have more than one project, you need to specify the project to restore the packages
  PM&gt; dotnet restore .\Unosquare.TinySine.RelayModule.Sample</code>
  <code>// If you have more than one project, you need to specify the project to publish the packages
  PM&gt; dotnet publish -r ubuntu.16.04-arm .\Unosquare.TinySine.RelayModule.Sample</code></li>
<li>Find the publish files, usually located in <ul>
<li>C:\~\Unosquare.TinySine.RelayModule.Sample\bin\Debug\netcoreapp2.0\ubuntu.16.04-arm\publish</li>
</ul>
</li>
</ul>
<h3 id="running-the-project">Running the project</h3>
<p>Once you have published the project you need to pass the publish folder to the Raspberry Pi, you can use ssh or an usb to do that, and if you want, you can rename the folder. We just pass the publish folder.</p>
<p>In the Raspberry, you need to do:</p>
<ul>
<li><p>Navigate to the projects folder</p>
<pre><code>ubuntu@ubuntu:~$ cd publish
ubuntu@ubuntu:~/publish$
</code></pre></li>
<li>Give permissions to run the project
  <code>ubuntu@ubuntu:~/publish$ sudo chmod u+x *</code></li>
<li>Run the project
  <code>ubuntu@ubuntu:~/publish$ ./Unosquare.TinySine.RelayModule.Sample</code></li>
</ul>
<h2 id="missing-stuff">Missing Stuff</h2>
<ul>
<li>Some more testing is needed</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="doc" align="center">
              <span class="small mobile-hide">
                <img id="logo" class="doc-logo" src="best-practices/resources/images/transparent.gif" alt="">
              </span>
            </div>
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li class="top-sep">
                    <a href="https://github.com/unosquare/tsrelay/blob/dependabot/nuget/Unosquare.Swan.Lite-2.2.2/README.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2017-2019 <a href="https://www.unosquare.com">Unosquare</a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-8535255-2', 'auto');
        ga('send', 'pageview');
    </script>
  </body>
</html>
